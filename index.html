<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine?</title>
  <style>
    :root{
      --bg1:#ffdde1;
      --bg2:#ee9ca7;
      --card: rgba(255,255,255,.75);
      --text:#2b2b2b;
      --shadow: 0 20px 50px rgba(0,0,0,.15);
      --radius: 24px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg1), transparent 60%),
                  radial-gradient(1200px 800px at 90% 80%, var(--bg2), transparent 55%),
                  linear-gradient(135deg, #fff 0%, #ffeef1 45%, #fff 100%);
      overflow:hidden;
    }
    .card{
      width:min(520px, 92vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.6);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:28px 22px;
      text-align:center;
      position:relative;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,255,255,.7);
      border:1px solid rgba(0,0,0,.05);
      font-weight:600;
      font-size:14px;
    }
    h1{
      margin:16px 0 8px;
      font-size: clamp(26px, 4vw, 34px);
      letter-spacing:-.02em;
    }
    p{
      margin:0 0 18px;
      font-size:16px;
      line-height:1.35;
      opacity:.9;
    }
    .stage{
      margin-top:18px;
      position:relative;
      height:86px;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }
    button{
      appearance:none;
      border:0;
      border-radius:999px;
      padding:12px 18px;
      font-weight:700;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      user-select:none;
      position:relative;
    }
    button:active{ transform: translateY(1px) scale(.99); }
    .yes{ background:#ff4d6d; color:white; }
    .maybe{ background:#ffd166; color:#2b2b2b; }
    .no{ background:#ffffff; color:#444; border:1px solid rgba(0,0,0,.08); }

    .yes:hover{ filter: brightness(1.05); transform: translateY(-1px); }
    .maybe:hover{ filter: brightness(1.03); transform: translateY(-1px); }
    .no:hover{ transform: translateY(-1px); }

    .msg{
      margin-top:14px;
      min-height:42px;
      font-weight:650;
      font-size:16px;
    }
    .submsg{
      margin-top:6px;
      font-size:14px;
      opacity:.8;
      min-height:20px;
    }

    /* Hearts */
    .heart{
      position:fixed;
      left:0;
      top:0;
      pointer-events:none;
      font-size:18px;
      will-change: transform, opacity;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
    }

    /* Tiny footer */
    .footer{
      margin-top:14px;
      font-size:12px;
      opacity:.6;
    }

    /* Shake animation for fun */
    @keyframes wiggle {
      0%,100% { transform: rotate(0deg); }
      25% { transform: rotate(-2deg); }
      50% { transform: rotate(2deg); }
      75% { transform: rotate(-1deg); }
    }
    .wiggle { animation: wiggle .35s ease-in-out 1; }

    /* Confetti-ish glow */
    .glow{
      position:absolute;
      inset:-2px;
      border-radius: var(--radius);
      background: radial-gradient(500px 200px at 30% 20%, rgba(255,77,109,.35), transparent 60%),
                  radial-gradient(450px 220px at 80% 70%, rgba(255,209,102,.35), transparent 60%),
                  radial-gradient(520px 240px at 40% 90%, rgba(255,255,255,.45), transparent 65%);
      z-index:-1;
      opacity:.85;
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="glow" aria-hidden="true"></div>

    <div class="badge">ðŸ’Œ tiny survey</div>
    <h1>Would you like to be my Valentine?</h1>
    <p>Choose carefullyâ€¦ my heart is involved ðŸ˜Œ</p>

    <div class="stage" id="stage">
      <button class="yes" id="yesBtn">YES ðŸ’–</button>
      <button class="maybe" id="maybeBtn">MAYBE ðŸ˜³</button>
      <button class="no" id="noBtn">NO ðŸ™ƒ</button>
    </div>

    <div class="msg" id="msg"></div>
    <div class="submsg" id="submsg"></div>

    <div class="footer">P.S. this page is harmlessly cute.</div>
  </div>

  <script>
    // --- helpers ---
    const msg = document.getElementById('msg');
    const submsg = document.getElementById('submsg');
    const yesBtn = document.getElementById('yesBtn');
    const maybeBtn = document.getElementById('maybeBtn');
    const noBtn = document.getElementById('noBtn');
    const stage = document.getElementById('stage');
    const card = document.getElementById('card');

    const noPhrases = [
      "Ne sei proprio sicura? ðŸ¥º",
      "Proprioâ€¦ 100% sure? ðŸ˜­",
      "Posso farti un risotto con gli asparagiâ€¦ ",
      "Coccoleâ€¦ ðŸ«‚",
      "Sorpreseâ€¦ ðŸŽ",
      "Ok okâ€¦ un'ultima chance ðŸ˜”",
      "Mi sa che ho sbagliato a collegare i bottoni, grazie per il sÃ¬ ðŸ¤¨"
    ];
    let noCount = 0;
    let heartsInterval = null;

    function setMessage(main, sub=""){
      msg.textContent = main;
      submsg.textContent = sub;
      card.classList.add('wiggle');
      setTimeout(()=>card.classList.remove('wiggle'), 380);
    }

    // Small "pop" sound with WebAudio (no external files)
    function popSound(){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = "sine";
        o.frequency.setValueAtTime(740, ctx.currentTime);
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.10, ctx.currentTime + 0.01);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.12);
        o.connect(g); g.connect(ctx.destination);
        o.start();
        o.stop(ctx.currentTime + 0.13);
        setTimeout(()=>ctx.close(), 250);
      }catch(e){}
    }

    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      // random heart-ish emoji
      const emojis = ["ðŸ’–","ðŸ’˜","ðŸ’","ðŸ’—","ðŸ’“","ðŸ’ž","â¤ï¸"];
      h.textContent = emojis[Math.floor(Math.random()*emojis.length)];

      const startX = Math.random() * window.innerWidth;
      const startY = window.innerHeight + 20;
      const drift = (Math.random() * 160) - 80;
      const scale = 0.8 + Math.random() * 1.1;
      const duration = 1800 + Math.random() * 1200;

      h.style.left = startX + "px";
      h.style.top = startY + "px";
      h.style.fontSize = (16 + Math.random()*18) + "px";
      h.style.opacity = "0.95";

      document.body.appendChild(h);

      const start = performance.now();
      function animate(t){
        const p = Math.min(1, (t - start) / duration);
        const y = startY - (window.innerHeight + 260) * p;
        const x = startX + drift * Math.sin(p * Math.PI);
        const rot = (p*220) * (Math.random() > 0.5 ? 1 : -1);
        h.style.transform = `translate(${x - startX}px, ${y - startY}px) rotate(${rot}deg) scale(${scale})`;
        h.style.opacity = String(0.95 * (1 - p));
        if(p < 1) requestAnimationFrame(animate);
        else h.remove();
      }
      requestAnimationFrame(animate);
    }

    function startHearts(){
      stopHearts();
      heartsInterval = setInterval(spawnHeart, 90);
      // stop after a bit (keeps it cute, not annoying)
      setTimeout(stopHearts, 4200);
    }
    function stopHearts(){
      if(heartsInterval){
        clearInterval(heartsInterval);
        heartsInterval = null;
      }
    }

    // Make NO "run away" inside the stage area
    function moveNoButton(){
      const stageRect = stage.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // compute safe random position within stage bounds
      const padding = 6;
      const maxX = stageRect.width - btnRect.width - padding;
      const maxY = stageRect.height - btnRect.height - padding;

      // if stage is small (mobile wrap), just wiggle instead of moving too far
      if(maxX < 40 || maxY < 10){
        noBtn.classList.add('wiggle');
        setTimeout(()=>noBtn.classList.remove('wiggle'), 380);
        return;
      }

      const x = Math.max(padding, Math.random() * maxX);
      const y = Math.max(padding, Math.random() * maxY);

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    }

    // --- interactions ---
    yesBtn.addEventListener('click', ()=>{
      popSound();
      startHearts();
      setMessage("SIII!! ðŸ’ƒðŸ’ƒðŸ’ƒ", "Hai reso il tuo amato molto felice e coccoloso ðŸ’");
      // disable other buttons softly
      noBtn.disabled = true;
      maybeBtn.disabled = true;
      noBtn.style.opacity = .55;
      maybeBtn.style.opacity = .55;
    });

    maybeBtn.addEventListener('click', ()=>{
      popSound();
      setMessage("Oooohâ€¦ un forse ðŸ˜³", "Posso essere piÃ¹ convincente? ðŸ˜");
      spawnHeart();
      spawnHeart();
    });

    // For NO: change phrase + run away a bit
    noBtn.addEventListener('mouseenter', ()=>{
      // playful: only after first interaction
      if(noCount > 0) moveNoButton();
    });

    noBtn.addEventListener('click', ()=>{
      popSound();
      const phrase = noPhrases[Math.min(noCount, noPhrases.length - 1)];
      noCount++;
      setMessage(phrase, "Riprovaâ€¦ magari hai clickato male ðŸ˜Œ");
      moveNoButton();
      spawnHeart(); // tiny guilt heart ðŸ˜‡
    });

    // mobile touch: make NO move on touchstart sometimes
    noBtn.addEventListener('touchstart', ()=>{
      if(noCount > 0) moveNoButton();
    }, {passive:true});
  </script>
</body>
</html>
